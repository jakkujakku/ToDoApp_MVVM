 # ToDoApp_MVVM
[ë‚´ì¼ë°°ì›€ìº í”„ iOSíŠ¸ë™] ì•± ê°œë°œ ì‹¬í™” ê°œì¸ ê³¼ì œ - ë””ìì¸ì´ ì •í•´ì§„ UI êµ¬ì„±í•˜ê¸° ë° CoreDataë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„° ì¼ê´€ì„± êµ¬í˜„í•˜ê¸°
<br>

## ğŸ§‘ğŸ»â€ğŸ’» í”„ë¡œì íŠ¸ ì†Œê°œ
"ToDoApp_MVVM ì•± ë§Œë“¤ê¸°"<p> 
ì´ í”„ë¡œì íŠ¸ëŠ” Swift ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Xcodeì—ì„œ ê°œë°œí•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. <br>
ì´ ì•±ì€ Core Dataë¥¼ í™œìš©í•˜ì—¬ ë§Œë“  ToDo ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ë°ì´í„°ë¥¼ ì¡°íšŒ/ì…ë ¥/ì‚­ì œ/ìˆ˜ì • í•  ìˆ˜ ìˆìœ¼ë©°, ë‹¤ì–‘í•œ ê¸°ëŠ¥ê³¼ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.
1. **ë©”ì¸ í™”ë©´**: í•´ì•¼í•  ì¼ê³¼ ì™„ë£Œëœ ì¼ ê·¸ë¦¬ê³  í”„ë¡œí•„ í˜ì´ì§€ë¡œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **ì¹´í…Œê³ ë¦¬ í™”ë©´**: ì¹´í…Œê³ ë¦¬ë¥¼ ë§Œë“¤ê³  ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3. **ToDo í™”ë©´**: í•´ì•¼í•  ì¼ì„ ë§Œë“¤ê³  ì™„ë£Œí•˜ê±°ë‚˜ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
4. **ë””í…Œì¼ í™”ë©´**: íšŒì› ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê³  ê°œì¸ ê³„ì •ì •ë³´ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”.
5. **ì™„ë£Œ í™”ë©´**: ì™„ë£Œëœ ëª©ë¡ì„ í™•ì¸í•˜ê³  ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
6. **í”„ë¡œí•„ í™”ë©´**: í”„ë¡œí•„ í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
<br>

## ğŸ—“ï¸ ê°œë°œ ê¸°ê°„
* 2023-09-11(ì›”) ~ 2023-09-22(ê¸ˆ), 11ì¼ê°„
<br><br>

## ğŸ’ğŸ» ê°œë°œì
- ê¹€ì¤€ìš° - [MOMO](https://github.com/jakkujakku)
<br><br>

## Git Flow
- main : ì†Œí”„íŠ¸ì›¨ì–´ ì œí’ˆì„ ë°°í¬í•˜ëŠ” ìš©ë„ë¡œ ì“°ëŠ” ë¸Œëœì¹˜
- develop : ê°œë°œìš© develop ë¸Œëœì¹˜

### Git Conventions
---
Commit MessageëŠ” ì•„ë˜ì™€ ê°™ì€ ê·œì¹™ì„ ë”°ë¦…ë‹ˆë‹¤.

- [FEAT]: ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€
- [FIX]: ì”ì”ë°”ë¦¬ ìˆ˜ì •
- [DESIGN]: UI ë””ìì¸ ë³€ê²½
- [STYLE]: ì½”ë“œ í¬ë§· ë³€ê²½, ì„¸ë¯¸ ì½œë¡  ëˆ„ë½, ì½”ë“œ ìˆ˜ì •ì´ ì—†ëŠ” ê²½ìš°
- [DOCS]: ë¬¸ì„œ ìˆ˜ì •, í•„ìš”í•œ ì£¼ì„ ì¶”ê°€ ë° ë³€ê²½
- [RENAME]: íŒŒì¼ í˜¹ì€ í´ë”ëª…ì„ ìˆ˜ì •í•˜ê±°ë‚˜ ì˜®ê¸°ëŠ” ì‘ì—…ë§Œì¸ ê²½ìš°
- [REMOVE]: íŒŒì¼ì„ ì‚­ì œí•˜ëŠ” ì‘ì—…ë§Œ ìˆ˜í–‰í•œ ê²½ìš°
- [MERGE] : ë³‘í•©
- [CONFLICT]: ë³‘í•© ì‹œ ì¶©ëŒ í•´ê²°
- [COMPLETION]: ì‘ì—…ì„ ì™„ë£Œí•˜ê³  ë§ˆì§€ë§‰ ì»¤ë°‹ì„ ì‘ì„±í•˜ëŠ” ê²½ìš°
Pull RequestsëŠ” Commit Messageì™€ ë™ì¼í•˜ê²Œ ì¨ì„œ ì˜¬ë¦½ë‹ˆë‹¤.

## ğŸ“Œ ì£¼ìš” ê¸°ëŠ¥
#### ì¹´í…Œê³ ë¦¬ 
- ì¹´í…Œê³ ë¦¬ë¥¼ ë§Œë“¤ê¸°
- í•˜ë‚˜ì”© ì‚­ì œí•˜ê¸°
- ì „ì²´ ì‚­ì œí•˜ê¸°

#### To Do í™”ë©´
- To Do ë§Œë“¤ê¸°
- í•˜ë‚˜ì”© ì‚­ì œí•˜ê¸°
- ì „ì²´ ì‚­ì œí•˜ê¸°
- ë””í…Œì¼ í™”ë©´ ì´ë™

#### ë””í…Œì¼ í™”ë©´
- ì„ íƒëœ í™”ë©´ì˜ ì •ë³´ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
- ì„ íƒëœ í™”ë©´ì˜ ì •ë³´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### í”„ë¡œí•„ í™”ë©´
- Figma ì˜ˆì‹œëŒ€ë¡œ í™”ë©´ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
<br><br>

## ğŸ§ ì•± ì‹¤í–‰ ì´ë¯¸ì§€
<img src="https://velog.velcdn.com/images/jakkujakku98/post/7efa2d8d-2b68-455d-9e60-21ee180d5187/image.png" width="30%" height="30%">
<img src="https://velog.velcdn.com/images/jakkujakku98/post/54ec5a4c-fed5-4a28-8be2-740b9c646865/image.png" width="30%" height="30%">
<img src="https://velog.velcdn.com/images/jakkujakku98/post/addeac5d-2dc2-4253-99b7-980eff18ccd6/image.png" width="30%" height="30%">
<img src="https://velog.velcdn.com/images/jakkujakku98/post/69e6f122-4aec-4ba8-8aa6-9eb94d41f45f/image.png" width="30%" height="30%">
<img src="https://velog.velcdn.com/images/jakkujakku98/post/607a5c8b-1c04-41ee-ac18-808dd2618902/image.png" width="30%" height="30%">
<img src="https://velog.velcdn.com/images/jakkujakku98/post/74c1e221-e0a2-4dae-86b4-dfeca76a63f4/image.png" width="30%" height="30%">
<img src="https://velog.velcdn.com/images/jakkujakku98/post/cc92950b-71a8-4056-b9a1-5216dced92ad/image.png" width="30%" height="30%">
<br><br>

## ì•± êµ¬ì¡° - MVVM
### MODEL
- DataManager : CoreData context ë³´ìœ 
- MockupData : ProfileViewControllerì™€ ProfileCellì˜ ì´ë¯¸ì§€ ëª©ì—… ë°ì´í„° ë³´ìœ 
- DataManager.xcdatamodeld : Core Data 

### VIEW
- MainViewController : ë©”ì¸ í˜ì´ì§€
- CategoryViewController : ì¹´í…Œê³ ë¦¬ ì‘ì„± í˜ì´ì§€
- ToDoViewController : í•´ì•¼í•  ì¼ ì‘ì„± í˜ì´ì§€
- DetailViewController : í•´ì•¼í•  ì¼ ì„¸ë¶€ì‚¬í•­ í˜ì´ì§€
- CompletionViewController : ì¬ì‚¬ìš©í•  UIBar ë²„íŠ¼
- ProfileViewController : í”„ë¡œí•„ í˜ì´ì§€

### ViewModel
- CategoryViewModel : ì¹´í…Œê³ ë¦¬ë·°ì—ì„œ ì…ë ¥ ë°›ì€ ë‚´ìš©ì„ ì²˜ë¦¬ & ë°ì´í„°ë¥¼ ëª¨ë¸ë¡œ ì „ë‹¬
- ToDoViewModel : ToDoë·°ì—ì„œ ì…ë ¥ ë°›ì€ ë‚´ìš©ì„ ì²˜ë¦¬ & ë°ì´í„°ë¥¼ ëª¨ë¸ë¡œ ì „ë‹¬
- CompletionViewModel : ToDoë·°ì—ì„œ ë³´ë‚¸ ë°ì´í„°ë¥¼ CoreData ëª¨ë¸ë¡œ ì „ë‹¬ & ToDoë·°ì™€ Completionë·°ì—ì„œ ì…ë ¥ ë°›ì€ ë‚´ìš©ì„ ì²˜ë¦¬

## MVC ì™€ MVVM ë¹„êµ
- MVCë€? : ëª¨ë¸ - ë·° - ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì´ë£¨ì–´ì ¸ ìˆëŠ” íŒ¨í„´ì…ë‹ˆë‹¤. ìœ ì§€ë³´ìˆ˜ì™€ êµ¬í˜„ì´ ì‰¬ìš´ ê²ƒì´ ì¥ì ì´ì§€ë§Œ, ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì˜ì¡´ì„± ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë‹¨ì ì´ ìˆëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.

- MVVMë€? : ëª¨ë¸ - ë·° - ë·°ëª¨ë¸ë¡œ ì´ë£¨ì–´ì ¸ ìˆëŠ” íŒ¨í„´ì…ë‹ˆë‹¤. ë·°ì™€ ë¡œì§ì´ ë¶„ë¦¬ë˜ì–´ ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ìš°ë©°, ë·°ì™€ ë·°ëª¨ë¸ ì‚¬ì´ë¥¼ ìë™ ì—…ë°ì´íŠ¸ë¥¼ í•˜ê¸° ë•Œë¬¸ì— MVCì— ë¹„í•´ ì½”ë“œë¥¼ ì¡°ê¸ˆ ë” ê°„ê²°í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì ì  ë” ë§ì€ ë·° ëª¨ë¸ì´ ìƒê¸´ë‹¤ë©´, ê´€ë¦¬ ë° ìœ ì§€ë³´ìˆ˜í•˜ê¸° ê¹Œë‹¤ë¡­ë‹¤ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.

## UserDefaultsì™€ CoreDataì˜ ì°¨ì´ì 
- UserDefaultsë€? : ê°„ë‹¨í•œ í‚¤-ê°’ ìŒì„ ì‚¬ìš©í•˜ì—¬ ì‘ì€ ì–‘ì˜ ë°ì´í„°ë¥¼ ì˜êµ¬ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
ê°„ë‹¨í•œ ì„¤ì • ë° ì‚¬ìš©ì ê¸°ë³¸ ì„¤ì • ì €ì¥ ê°™ì€ ì‘ì€ ë°ì´í„°ì— ì í•©í•©ë‹ˆë‹¤.

- CoreDataë€? : CoreDataë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ê³  ê²€ìƒ‰, ì •ë ¬ ë° ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë©°, ë³µì¡í•œ ë°ì´í„° ëª¨ë¸ì„ ì •ì˜í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ìš©ì´í•©ë‹ˆë‹¤.

- ë‘˜ì˜ ì°¨ì´ì  : UserDefaultsëŠ” ì‘ì€ ì–‘ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë° ì í•©í•˜ë©°, ëŒ€ê·œëª¨ ë°ì´í„° ë˜ëŠ” êµ¬ì¡°í™”ëœ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸°ì—ëŠ” ì í•©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. CoreDataëŠ” ëŒ€ê·œëª¨ ë°ì´í„°ì™€ ë³µì¡í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ë‹¤ë£¨ëŠ” ë° ì í•©í•©ë‹ˆë‹¤.

## ê¸°ì¡´ì˜ MVC ì½”ë“œì™€ MVVMìœ¼ë¡œ ë°”ê¾¼ ì½”ë“œ ë¹„êµ
- ê¸°ì¡´ì˜ MVC ì½”ë“œ 
- TodoWriteController : ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ì½”ë“œ
```swift
@IBAction func tappedSaveButton(_ sender: UIButton) {
        guard let text = textField.text else { return }
        let todoData = ToDoData(title: text, section: selectedSection)

        switch selectedSection {
        case Section.do.rawValue:
            DataManager.doData.insert(todoData, at: 0)
            DataManager.saveToDoUserDefaults()
        case Section.decide.rawValue:
            DataManager.decideData.insert(todoData, at: 0)
            DataManager.saveToDoUserDefaults()
        case Section.delegate.rawValue:
            DataManager.delegateData.insert(todoData, at: 0)
            DataManager.saveToDoUserDefaults()
        case Section.delete.rawValue:
            DataManager.deleteData.insert(todoData, at: 0)
            DataManager.saveToDoUserDefaults()
        default:
            return
        }
        navigationController?.popViewController(animated: true)
    }
```
- MVVM íŒ¨í„´ ì½”ë“œ 
- ToDoViewModel ë¶€ë¶„ì˜ ë°ì´í„° ì €ì¥í•˜ëŠ” ì½”ë“œ
```swift
class ToDoViewModel {
    private var todoList = CurrentValueSubject<[Task], Never>([])
    private var selectedItem = CurrentValueSubject<Task?, Never>(nil)
    private var detailItem = CurrentValueSubject<Task?, Never>(nil)

    var todoPublisher: AnyPublisher<[Task], Never> {
        return todoList.eraseToAnyPublisher()
    }

    var selectedPublisher: AnyPublisher<Task?, Never> {
        return selectedItem.eraseToAnyPublisher()
    }

    var detailPublisher: AnyPublisher<Task?, Never> {
        return detailItem.eraseToAnyPublisher()
    }

    var item: Task?

    var todos: [Task] = [] {
        didSet {
            todos.sort(by: { $0.date! > $1.date! })
            todoList.send(todos)
        }
    }

    var selectedCategory: Category? {
        didSet {
            readItem()
        }
    }

    var totalCount: Int {
        return todos.count
    }

    var title: String {
        return item?.title ?? ""
    }

    var date: String {
        return DataManager.dateFormatter(date: item?.date ?? Date())
    }

    var modified: String {
        return DataManager.dateFormatter(date: item?.modifyDate ?? Date())
    }

    func didSelecteItem(at indexPath: Int) {
        print("### \(#function)")
        let item = todos[indexPath]
        selectedItem.send(item)
    }

    func createItem(id: UUID, title: String, date: Date, modifyDate: Date?, isCompleted: Bool) {
        let newTask = Task(context: DataManager.context)
        newTask.id = id
        newTask.title = title
        newTask.date = Date()
        newTask.isCompleted = false
        newTask.parentCategory = selectedCategory
        todos.append(newTask)

        do {
            try DataManager.context.save()
            readItem()
        } catch {
            print("### Insert Error: \(error)")
        }
    }

    func readItem(with request: NSFetchRequest<Task> = Task.fetchRequest(), predicate: NSPredicate? = nil) {
        let categoryPredicate = NSPredicate(format: "parentCategory.title MATCHES %@", selectedCategory?.title ?? "")

        if let addtionalPredicate = predicate {
            request.predicate = NSCompoundPredicate(andPredicateWithSubpredicates: [categoryPredicate, addtionalPredicate])
        } else {
            request.predicate = categoryPredicate
        }

        do {
            todos = try DataManager.context.fetch(request)
            todoList.send(todos)
        } catch {
            // error
            print("íŒ¨ì¹˜ ì—ëŸ¬ : \(error)")
        }
    }

    func updateItem(task: Task?, newTitle: String, modifyDate: Date) {
        task?.title = newTitle
        task?.modifyDate = modifyDate

        do {
            try DataManager.context.save()
            todoList.send(todos)
            selectedItem.send(item)
        } catch {
            print("### Update Error: \(error)")
        }
    }

    func deleteItem(at indexPath: Int) {
        let itemIndexPath = todos[indexPath]
        DataManager.context.delete(itemIndexPath)

        do {
            try DataManager.context.save()
            readItem()
            todoList.send(todos)
        } catch {
            print("### Delete Error: \(error)")
        }
    }

    func deleteItems() {
        for task in todos {
            DataManager.context.delete(task)
        }

        do {
            try DataManager.context.save()
            readItem()
            todoList.send(todos)
        } catch {
            print("### Delete Error: \(error)")
        }
    }
}

```
- MVC íŒ¨í„´
1. ë°ì´í„° ë¡œì§ì´ Controller ë¶€ë¶„ì— ë…¸ì¶œì´ ë˜ì–´ ìˆë‹¤.
2. ë·°ì™€ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ UI ê´€ë ¨ ë¡œì§ì´ í˜¼ì¬ë˜ì–´ ì½”ë“œê°€ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3. ë°ì´í„°ë¥¼ ë·°ì— ìˆ˜ë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤.

- MVVM íŒ¨í„´
1. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ì˜¤ë¡œì§€ ViewModelì„ í†µí•´ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ê° êµ¬ì„± ìš”ì†Œë¥¼ ë” ë…ë¦½ì ìœ¼ë¡œ ìœ ì§€í•  ìˆ˜ ìˆê³  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. ë°ì´í„° ë°”ì¸ë”©ì„ í†µí•´ ë·°ì™€ ë·°ëª¨ë¸ ê°„ì˜ ìë™ ì—…ë°ì´íŠ¸ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

## ToDo App_MVVM FlowChart
<img src="https://velog.velcdn.com/images/jakkujakku98/post/c3db60f3-8ba5-40dc-8f24-e2aeadf54590/image.png">

## CategoryController ì‘ë™ ìˆœì„œ
<img src="https://velog.velcdn.com/images/jakkujakku98/post/6462b5fe-212c-4580-a339-43719e738afd/image.png">

## ToDoViewController ì‘ë™ ìˆœì„œ
<img src="https://velog.velcdn.com/images/jakkujakku98/post/e682e2f5-fbbf-4839-9d9f-619e77f74e64/image.png">

## CompletionViewController ì‘ë™ ìˆœì„œ
<img src="https://velog.velcdn.com/images/jakkujakku98/post/6f7f0e18-2261-4ef9-aa17-fec21f9fd16d/image.png">
